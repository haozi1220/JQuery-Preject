<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>自定义滚动条</title>
    <style>
        #scrollBox {
            height: 300px;
            width: 30px;
            border: 1px solid #000;
            position: absolute;
            right: 0;
            z-index: 10;
            background: #FFFFFF;
            border-radius: 15px;
        }
        #scrollBar {
            width: 100%;
            height: 50px;
            background: red;
            position: absolute;
            left: 0;
            top:0;
            border-radius: 15px;
        }

        #main {
            width: 200px;
            height: 300px;
            overflow: hidden;
            border: 1px solid #000;
            position: absolute;
            left: 400px;
            top:30px;
        }

        #content{
            background: yellow;
            position: absolute;
            left: 0;
            top:0;
            width: 100%;
        }

        p{
            margin:0;
        }
    </style>
</head>
<body>
    <div id="main">
        <div id="scrollBox">
            <div id="scrollBar"></div>
        </div>
        <div id="content">
            <p>开始</p>
            <p>嘻嘻哈哈</p>
            <p>嘻嘻哈哈</p>
            <p>嘻嘻哈哈</p>
            <p>嘻嘻哈哈</p>
            <p>嘻嘻哈哈</p>
            <p>嘻嘻哈哈</p>
            <p>嘻嘻哈哈</p>
            <p>嘻嘻哈哈</p>
            <p>嘻嘻哈哈</p>
            <p>嘻嘻哈哈</p>
            <p>嘻嘻哈哈</p>
            <p>嘻嘻哈哈</p>
            <p>嘻嘻哈哈</p>
            <p>嘻嘻哈哈</p>
            <p>嘻嘻哈哈</p>
            <p>嘻嘻哈哈</p>
            <p>嘻嘻哈哈</p>
            <p>嘻嘻哈哈</p>
            <p>嘻嘻哈哈</p>
            <p>嘻嘻哈哈</p>
            <p>嘻嘻哈哈</p>
            <p>嘻嘻哈哈</p>
            <p>结束</p>
        </div>
    </div>
</body>
</html>
<script type="text/javascript">
    var scrollBar = document.getElementById("scrollBar");
    var scrollBox = document.getElementById("scrollBox");
    var main = document.getElementById("main");
    var content = document.getElementById("content");
    //计算出滚动条需要走的最大距离
    var maxScrollBar=scrollBox.clientHeight - scrollBar.offsetHeight;
    var maxContent=main.scrollHeight - main.clientHeight;
    //按下滚动条时的事件处理
    scrollBar.onmousedown=function(ev){
        var disY = ev.clientY - scrollBar.offsetTop;
        document.onmousemove = function (ev){
              //限制范围
            var t = ev.clientY - disY;
            if( t < 0  ) t = 0;
            if( t > maxScrollBar ) t = maxScrollBar;
            var scale = t / maxScrollBar;
            scrollBar.style.top = t + "px"; 
            content.style.top = -scale * maxContent + 'px';
        };
        document.onmouseup = function (ev){
            document.onmouseup  =document.onmousemove = null;   
        };  
    }
</script>